<div class="filters" id="filters" data-controller="filter">
  <sl-dropdown>
    <sl-button slot="trigger">
      Filter
    </sl-button>
    <sl-menu>
      <%= render partial: "videos/index/filter-sorting/filters/filter", locals: { options: @search.genres, title: :genre, id: 'genre-filter', width: "200px" } %>
      <%= render partial: "videos/index/filter-sorting/filters/filter", locals: { options: @search.leaders, title: :leader, id: 'leader-filter', width: "300px" } %>
      <%= render partial: "videos/index/filter-sorting/filters/filter", locals: { options: @search.followers, title: :follower, id: 'follower-filter', width: "300px" } %>
      <%= render partial: "videos/index/filter-sorting/filters/filter", locals: { options: @search.orchestras, title: :orchestra, id: 'orchestra-filter', width: "300px" } %>
      <%= render partial: "videos/index/filter-sorting/filters/filter", locals: { options: @search.years, title: :year, id: 'year-filter', width: "200px" } %>
      <sl-menu-label style="margin-left: 28px;">Additional Filters</sl-menu-label>
      <sl-divider style="margin:12px 0;"></sl-divider>
      <% if current_user %>
        <%= button_tag type: "button",
                          class: "additional-filters-button",
                          data: { controller: "filter",
                          action: "filter#filter",
                                  "filter-watched-value": filtering_params["watched"] == "true" ? 0 : "true" } do %>
          <% if filtering_params["watched"] == "true" %>
            <%= content_tag(:b, "Watched") %>
            <%= fa_icon("times", class: "videos-sortable-icon") %>
          <% else %>
            Watched
          <% end %>
        <% end %>
        <%= button_tag type: "button",
                        class: "additional-filters-button",
                        data:  {controller: "filter",
                        action: "filter#filter",
                                "filter-liked-value": filtering_params["liked"] == "true" ? 0 : "true" } do %>
          <% if filtering_params["liked"] == "true" %>
            <%= content_tag(:b, "Liked") %>
            <%= fa_icon("times", class: "videos-sortable-icon") %>
          <% else %>
            Liked
          <% end %>
        <% end %>
        <%= button_tag type: "button",
                          class: "additional-filters-button",
                          data: { controller: "filter",
                          action: "filter#filter",
                                  "filter-watched-value": filtering_params["watched"] == "false" ? 0 : "false" } do %>
          <% if filtering_params["watched"] == "false" %>
            <%= content_tag(:b, "New To You") %>
            <%= fa_icon("times", class: "videos-sortable-icon") %>
          <% else %>
            New to You
          <% end %>
        <% end %>
      <% end %>
      <%= button_tag type: "button",
                        class: "additional-filters-button",
                        data: { controller: "filter",
                        action: "filter#filter",
                                "filter-hd-value": filtering_params["hd"] == "1" ? 0 : "1" } do %>
        <% if filtering_params["hd"] == "1" %>
          <%= content_tag(:b, "HD") %>
          <%= fa_icon("times", class: "videos-sortable-icon") %>
        <% else %>
          HD
        <% end %>
      <% end %>
    </sl-menu>
  </sl-dropdown>
  <sl-dropdown>
    <sl-button slot="trigger">
      Sorting
    </sl-button>
    <sl-menu>
      <sl-menu-label style="margin-left: 28px;">Sort By</sl-menu-label>
      <sl-divider style="margin:12px 0;"></sl-divider>
      <sl-menu-item>
        <%= sortable 'videos.performance_date', "desc",  "Recent First", @search %>
      </sl-menu-item>
      <sl-menu-item>
        <%= sortable 'videos.performance_date', "asc", "Oldest First", @search %>
      </sl-menu-item>
      <sl-menu-item>
        <%= sortable "videos.view_count", "desc",  "Most Viewed", @search %>
      </sl-menu-item>
      <sl-menu-item>
        <%= sortable "videos.popularity", "desc",  "Trending", @search %>
      </sl-menu-item>
      <sl-menu-item>
        <%= sortable "videos.like_count", "desc",  "Most Liked", @search %>
      </sl-menu-item>
      <sl-divider style="margin:12px 0"></sl-divider>
      <sl-menu-label style="margin-left: 28px;">Group By</sl-menu-label>
      <sl-divider style="margin:12px 0;"></sl-divider>
      <sl-menu-item>
        <%= sortable 'songs.title', "asc", "Song", @search %>
      </sl-menu-item>
      <sl-menu-item>
        <%= sortable 'songs.last_name_search', "asc",  "Orchestra", @search %>
      </sl-menu-item>
      <sl-menu-item>
        <%= sortable 'videos.channel_id', "asc",  "Channel", @search %>
      </sl-menu-item>
    </sl-menu>
  </sl-dropdown>
  <% if filtering_params.present? || sorting_params.present? %>
    <sl-button variant="danger"
                outline
                data-controller="filter"
                data-action="click->filter#filter"
      data-filter-clear-value= "1">
      Clear All
    </sl-button>
  <% end %>
</div>
