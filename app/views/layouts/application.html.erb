<!DOCTYPE html>
<html>
  <head>
    <title>TangoTube</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>

    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <div class="header">

  <%= link_to "TangoTube", root_path, id: "logo" %>

     <div class="search_bar">
       <%= form_with(url: root_path, method: :get, local: true) do |form| %>
     <div class="search-bar">
       <%= form_with(url: root_path, method: :get, local: true) do |f| %>
         <%= content_tag :div, 'data-controller': "autocomplete", "data-autocomplete-url": search_suggestions_path do %>
           <%= text_field_tag :query, @current_search, 'data-autocomplete-target': 'input', class: "input" %>
           <%= f.text_field :query, url: root_path, 'data-autocomplete-target': 'input', placeholder: "Search", class: "search-input" %>
           <%= tag :ul, 'data-autocomplete-target': 'results', class: 'autocomplete' %>
         <% end %>
           <%= form.button fa_icon("search"), class: "button_search", name: nil %>
         <%= f.button fa_icon("search"), class: "search-btn", name: nil %>
       <% end %>
     </div>

  <nav class = "nav">
    <% if user_signed_in? %>
      Logged in as <strong><%= current_user.email %></strong>.
      <%= link_to 'Edit profile', edit_user_registration_path, :class => 'navbar-link' %> |
      <%= link_to "Logout", destroy_user_session_path, method: :delete, :class => 'navbar-link'  %>
    <% else %>
      <%= link_to "Sign up", new_user_registration_path, :class => 'navbar-link'  %> |
      <%= link_to "Login", new_user_session_path, :class => 'navbar-link'  %>
    <% end %>
  </nav>
</div>


  <body>
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>
    <%= yield %>
  </body>

  <div class="footer">
 <%= render 'layouts/footer' %>
  </div>
</html>
